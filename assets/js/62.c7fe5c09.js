(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{467:function(s,a,t){"use strict";t.r(a);var e=t(42),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("一篇文章带你掌握你所需的Docker知识")]),s._v(" "),t("h2",{attrs:{id:"基础命令合集"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基础命令合集"}},[s._v("#")]),s._v(" 基础命令合集")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用 docker inspect 来查看 Docker 的底层信息")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" inspect "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("docker-container-name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker port 命令可以让我们快捷地查看端口的绑定情况")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" port "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("docker-container-name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("container-port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个新的 Docker 网络。-d：参数指定 Docker 网络类型，有 bridge、overlay。")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" network create -d bridge "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("network-name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看最近10行的实时日志")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" logs -f --tail "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("docker-container-name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h2",{attrs:{id:"👩‍💻-普通用户可执行docker命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#👩‍💻-普通用户可执行docker命令"}},[s._v("#")]),s._v(" 👩‍💻 普通用户可执行docker命令")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" -u "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("544")]),s._v(" -d /usr/testuser1 -g "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v(" -m testuser1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"🔝-升级docker-和-docker-compose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🔝-升级docker-和-docker-compose"}},[s._v("#")]),s._v(" 🔝 升级Docker 和 docker-compose")]),s._v(" "),t("h3",{attrs:{id:"_1-升级-docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-升级-docker"}},[s._v("#")]),s._v(" 1）升级 Docker")]),s._v(" "),t("h3",{attrs:{id:"_2-升级-docker-compose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-升级-docker-compose"}},[s._v("#")]),s._v(" 2）升级 docker-compose")]),s._v(" "),t("p",[s._v("github上docker-compose的release链接： https://github.com/docker/compose/releases")]),s._v(" "),t("p",[s._v("由于github的源国内缓慢，故此处使用daocloud源")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行以下命令即可")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载最新docker-compose")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -L https://get.daocloud.io/docker/compose/releases/download/v2.2.3/docker-compose-"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -s"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -m"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /usr/local/bin/docker-compose\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 授予执行权限")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /usr/local/bin/docker-compose\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"🔨-docker硬盘占用太高解决方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🔨-docker硬盘占用太高解决方案"}},[s._v("#")]),s._v(" 🔨 Docker硬盘占用太高解决方案")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看系统磁盘占用")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看docker磁盘占用详情")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" system "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" -v\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看容器的volume信息")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" inspect container_name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" Mounts -A "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或执行自动清理")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" system prune -a\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("docker system prune 自动清理说明：")]),s._v(" "),t("p",[s._v("该指令默认会清除所有如下资源：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("已停止的容器（container）")])]),s._v(" "),t("li",[t("p",[s._v("未被任何容器所使用的卷（volume）")])]),s._v(" "),t("li",[t("p",[s._v("未被任何容器所关联的网络（network）")])]),s._v(" "),t("li",[t("p",[s._v("所有悬空镜像（image）。")])])]),s._v(" "),t("p",[s._v("该指令默认只会清除悬空镜像，未被使用的镜像不会被删除。\n添加 -a 或 --all参数后，可以一并清除所有未使用的镜像和悬空镜像。\n可以添加 -f 或 --force参数用以忽略相关告警确认信息。\n指令结尾处会显示总计清理释放的空间大小。")])])}),[],!1,null,null,null);a.default=n.exports}}]);